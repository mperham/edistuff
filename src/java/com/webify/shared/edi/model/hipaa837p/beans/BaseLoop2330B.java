package com.webify.shared.edi.model.hipaa837p.beans;

import com.webify.shared.edi.model.*;
import com.webify.shared.edi.model.hipaa837p.*;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import java.io.IOException;
import java.util.*;

/*
 * AUTOGENERATED FILE - DO NOT EDIT!!!
 */
public class BaseLoop2330B extends EDILoop {

	private static final Log log = LogFactory.getLog(Loop2330B.class);

	private int startLineNumber, endLineNumber;
	public int getStartLineNumber() { return startLineNumber; }
	public int getEndLineNumber() { return endLineNumber; }

	/** Do NOT use this method - it is not public by choice... */
	public void setEndLineNumber(int foo) { endLineNumber = foo; }
	/** Do NOT use this method - it is not public by choice... */
	public void setStartLineNumber(int foo) { startLineNumber = foo; }

	public static final String[] TRIGGER_VALUES = new String[] {
		"PR"
	};

	// Segments
	private SegmentNM1_2 Nm1;
	public SegmentNM1_2 getNm1() { return Nm1; }
	public void setNm1(SegmentNM1_2 seg) { Nm1 = seg; }

	private SegmentN2_1 N2;
	public SegmentN2_1 getN2() { return N2; }
	public void setN2(SegmentN2_1 seg) { N2 = seg; }

	private List Per;
	public SegmentPER_1 getPer(int idx) { 
		if (Per == null || idx >= Per.size()) {
			throw new ArrayIndexOutOfBoundsException("Per");
		}
		return (SegmentPER_1) Per.get(idx);
	}
	public List getPer() {
		return Per;
	}
	public void setPer(List segs) { Per = segs; }

	private SegmentDTP_1 Dtp;
	public SegmentDTP_1 getDtp() { return Dtp; }
	public void setDtp(SegmentDTP_1 seg) { Dtp = seg; }

	private List Ref01;
	public SegmentREF_1 getRef01(int idx) { 
		if (Ref01 == null || idx >= Ref01.size()) {
			throw new ArrayIndexOutOfBoundsException("Ref01");
		}
		return (SegmentREF_1) Ref01.get(idx);
	}
	public List getRef01() {
		return Ref01;
	}
	public void setRef01(List segs) { Ref01 = segs; }

	private List Ref02;
	public SegmentREF_1 getRef02(int idx) { 
		if (Ref02 == null || idx >= Ref02.size()) {
			throw new ArrayIndexOutOfBoundsException("Ref02");
		}
		return (SegmentREF_1) Ref02.get(idx);
	}
	public List getRef02() {
		return Ref02;
	}
	public void setRef02(List segs) { Ref02 = segs; }

	private List Ref03;
	public SegmentREF_1 getRef03(int idx) { 
		if (Ref03 == null || idx >= Ref03.size()) {
			throw new ArrayIndexOutOfBoundsException("Ref03");
		}
		return (SegmentREF_1) Ref03.get(idx);
	}
	public List getRef03() {
		return Ref03;
	}
	public void setRef03(List segs) { Ref03 = segs; }


	// Loops

	public void parse(EDIInputStream eis) throws IOException {
		if (log.isDebugEnabled()) log.debug("Starting loop 2330B");
		startLineNumber = eis.getCurrentSegmentNumber() + 1;

		if (!eis.peekSegment("NM1")) {
			eis.addError("A single instance of Segment NM1 is required.");
		} else {
			Nm1 = new SegmentNM1_2();
			Nm1.setOrdinal(327);
			Nm1.parse(eis);
		}

		if (eis.peekSegment("N2")) {
			N2 = new SegmentN2_1();
			N2.setOrdinal(328);
			N2.parse(eis);
		}

		while (eis.peekSegment("PER")) {
			if (Per == null) Per = new ArrayList();
			SegmentPER_1 tmp = new SegmentPER_1();
			tmp.setOrdinal(329);
			tmp.parse(eis);
			Per.add(tmp);
			if (Per.size() > 2) {
				eis.addError("Segment PER has too many instances.  It can only repeat 2 times");
				eis.eatSegments("PER");
				break;
			}
		}

		if (eis.peekSegment("DTP")) {
			Dtp = new SegmentDTP_1();
			Dtp.setOrdinal(330);
			Dtp.parse(eis);
		}

		while (eis.peekSegment("REF", 1, new String[] { "2U", "F8", "FY", "NF", "TJ" })) {
			if (Ref01 == null) Ref01 = new ArrayList();
			SegmentREF_1 tmp = new SegmentREF_1();
			tmp.setOrdinal(331);
			tmp.parse(eis);
			Ref01.add(tmp);
			if (Ref01.size() > 2) {
				eis.addError("Segment REF has too many instances.  It can only repeat 2 times");
				eis.eatSegments("REF");
				break;
			}
		}

		while (eis.peekSegment("REF", 1, new String[] { "9F", "G1" })) {
			if (Ref02 == null) Ref02 = new ArrayList();
			SegmentREF_1 tmp = new SegmentREF_1();
			tmp.setOrdinal(332);
			tmp.parse(eis);
			Ref02.add(tmp);
			if (Ref02.size() > 2) {
				eis.addError("Segment REF has too many instances.  It can only repeat 2 times");
				eis.eatSegments("REF");
				break;
			}
		}

		while (eis.peekSegment("REF", 1, "T4")) {
			if (Ref03 == null) Ref03 = new ArrayList();
			SegmentREF_1 tmp = new SegmentREF_1();
			tmp.setOrdinal(333);
			tmp.parse(eis);
			Ref03.add(tmp);
			if (Ref03.size() > 2) {
				eis.addError("Segment REF has too many instances.  It can only repeat 2 times");
				eis.eatSegments("REF");
				break;
			}
		}

		endLineNumber = eis.getCurrentSegmentNumber();
		validate(eis);
	}

	public void emit(EDIOutputStream eos) throws IOException {
		if (Nm1 != null) {
			Nm1.emit(eos);
		} else {
			eos.addError("Missing mandatory segment 'NM1'");
		}

		if (N2 != null) {
			N2.emit(eos);
		}

		if (Per != null) {
			int idx = 0, size = Per.size();
			while (idx < size) {
				getPer(idx++).emit(eos);
			}
		}

		if (Dtp != null) {
			Dtp.emit(eos);
		}

		if (Ref01 != null) {
			int idx = 0, size = Ref01.size();
			while (idx < size) {
				getRef01(idx++).emit(eos);
			}
		}

		if (Ref02 != null) {
			int idx = 0, size = Ref02.size();
			while (idx < size) {
				getRef02(idx++).emit(eos);
			}
		}

		if (Ref03 != null) {
			int idx = 0, size = Ref03.size();
			while (idx < size) {
				getRef03(idx++).emit(eos);
			}
		}

	}

	public EDIElement createCopy() {
		Loop2330B thisCopy = new Loop2330B();
		thisCopy.setStartLineNumber(this.startLineNumber);
		thisCopy.setEndLineNumber(this.endLineNumber);

		if (Nm1 != null) {
			thisCopy.setNm1((SegmentNM1_2)Nm1.createCopy());
		}

		if (N2 != null) {
			thisCopy.setN2((SegmentN2_1)N2.createCopy());
		}

		if (Per != null) {
			thisCopy.setPer(new ArrayList());
			int idx = 0, size = Per.size();
			while (idx < size) {
				thisCopy.getPer().add(getPer(idx++).createCopy());
			}
		}

		if (Dtp != null) {
			thisCopy.setDtp((SegmentDTP_1)Dtp.createCopy());
		}

		if (Ref01 != null) {
			thisCopy.setRef01(new ArrayList());
			int idx = 0, size = Ref01.size();
			while (idx < size) {
				thisCopy.getRef01().add(getRef01(idx++).createCopy());
			}
		}

		if (Ref02 != null) {
			thisCopy.setRef02(new ArrayList());
			int idx = 0, size = Ref02.size();
			while (idx < size) {
				thisCopy.getRef02().add(getRef02(idx++).createCopy());
			}
		}

		if (Ref03 != null) {
			thisCopy.setRef03(new ArrayList());
			int idx = 0, size = Ref03.size();
			while (idx < size) {
				thisCopy.getRef03().add(getRef03(idx++).createCopy());
			}
		}

		return thisCopy;
	}

}
